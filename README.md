# pentesting-book-notes

My notes of progress with [Penetration Testing](https://nostarch.com/pentesting) by Georgia Weidman.

# Setting up the lab in Hyper-V

I decided to use *Hyper-V* on Windows 10 for my lab instead of VMWare, so there were some additional steps to take compared to the lab setup guide in the book.

All of the targets were using the 32-bit versions as described in the book. For all Linux VMs I disabled Dynamic Memory as it didn't seem to play nice with the Linux guests.

### Windows XP target

Downloaded an XP SP3 ISO from MSDN, installed into Generation 1 Hyper-V VM with 512 MB RAM. Didn't set up static IP as I didn't get that working in Hyper-V yet.

Had to download Adobe Reader, XAMPP and Oracle Java from a different website than originally stated as the links at the oldapps.com were dead.

### Ubuntu target

Downloaded the zipped VMWare VM, converted the virtual hard drive from VMDK to VHDX format using Microsoft Virtual Machine Converter.
Instructions in PowerShell:

    Import-Module "C:\Program Files\Microsoft Virtual Machine Converter\MvmcCmdlet.psd1"
    ConvertTo-MvmcVirtualHardDisk -SourceLiteralPath '.\Virtual Disk.vmdk' -VhdType DynamicHardDisk -VhdFormat Vhdx -Destination c:\vhd

Then set up a new Generation 1 Hyper-V VM with 1 GB RAM (works also with 512 MB) and used the existing disk. It was also necessary to add a **Legacy Network Adapter** in VM settings as the default network adapter wasn't detected by Ubuntu 8.10.

Sometimes the VM complains during the boot process about not being able to find a disk by UUID, but typing `exit` into the initramfs environment 
enabled me to continue with the boot.

I also needed to change the static IP to DHCP by editing /etc/network/interfaces, and defining eth0 as:

    auto eth0
    iface eth0 inet static
    
Then restart networking with `sudo /etc/init.d/networking restart`

### Windows 7 target

Downloaded a Windows 7 SP1 ISO from MSDN, installed into a Generation 1 Hyper-V VM with 1 GB RAM.

Worked as described in the guide. Didn't set up static IP as I didn't get that working in Hyper-V yet.

### Kali VM

Here I went with the current latest version of Kali - [2019.2](https://www.kali.org/news/kali-linux-2019-2-release/) 64-bit. 
For this I created a Generation 2 VM with 2 GB RAM, disabled Dynamic Memory and proceeded with the installation as in the book with the following changes:

- Instead of 32-bit MinGW I installed 64-bit with `apt-get install mingw-w64`
- Installed latest version of Veil: https://github.com/Veil-Framework/Veil
  - as described in the Readme, used Kali quick install:
     - `apt -y install veil`
     - `/usr/share/veil/config/setup.sh --force --silent`
